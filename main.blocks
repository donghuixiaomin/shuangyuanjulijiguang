<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="I+3-xSOZrK(]8N3C7[[+">enterDetected</variable><variable id="7md()6^1%){?-QuPZ5d#">exitDetected</variable><variable id="n5K[{:WTfM5H_mu*3-k(">enterCount</variable><variable id="s(0{@2vmRq6Pe$0esb[X">exitCount</variable></variables><block type="device_forever" id="8PIDWb{*`34,1]|@bS{#" x="205" y="-155"><comment pinned="false" h="80" w="160">是否检测到离开</comment><statement name="HANDLER"><block type="controls_if" id="~+wAS^8;o|W2Wzq*+-HW"><comment pinned="false" h="80" w="160">外侧传感器检测到距离小于阈值，表示有人靠近门</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="@v/`(ry*%[*u6T4pxAaL"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="farState" id="4unp=m0rYiJ7is$sre4I"><field name="farStatepin">Write_pin.w0</field></block></value><value name="B"><shadow type="math_number" id="jV0em?vAS|B+JeYb[|]@"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="_T,XR*uAumFc{{Thal`u"><field name="VAR" id="I+3-xSOZrK(]8N3C7[[+">enterDetected</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id=".9A-gf2tE#DqXgJK3P#A"><field name="BOOL">TRUE</field></block></value></block></statement><next><block type="controls_if" id="T,`!Jm,m/oK*v$k=Z=uh"><comment pinned="false" h="80" w="160">内侧传感器检测到距离小于阈值，表示有人通过门进入或离开</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="4++I7kK**pkz({{5S-sK"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="farState" id="O-Rup.|F[x$#%RTFE#T`"><field name="farStatepin">Write_pin.w2</field></block></value><value name="B"><shadow type="math_number" id="OCModjeJiS`qCA_GiwW~"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="Z5Q9;oO$3IT?n|z4E|Ns"><field name="VAR" id="7md()6^1%){?-QuPZ5d#">exitDetected</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="S*nds-!V(v~5hNYvT8L$"><field name="BOOL">TRUE</field></block></value></block></statement><next><block type="controls_if" id="VyR9?bt~QTmMgjWlY%9c"><comment pinned="false" h="80" w="160">如果先检测到进入，增加进入人次</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="*o^?ob]Qe_F@c]7qS76^"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="XD}8RZ2*LPZ-,6r-YM]v"><field name="VAR" id="I+3-xSOZrK(]8N3C7[[+">enterDetected</field></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id=":$1gZpxd||ERnYgGc?0D"><field name="VAR" id="7md()6^1%){?-QuPZ5d#">exitDetected</field></block></value></block></value><statement name="DO0"><block type="variables_change" id="(PLy65vWXiKs[[Of1ek9"><field name="VAR" id="n5K[{:WTfM5H_mu*3-k(">enterCount</field><value name="VALUE"><shadow type="math_number" id="D/%dvyhrOVhf)Jg7c)B5"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="CX{PD-tUe4psA/qm5_zH"><field name="VAR" id="I+3-xSOZrK(]8N3C7[[+">enterDetected</field><comment pinned="false" h="80" w="160">重置进入检测状态</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="T@CZyqh1bs6-rwur_~$j"><field name="BOOL">FALSE</field></block></value></block></next></block></statement><next><block type="controls_if" id="WH{6K$m~+)kd}I[W/aYo"><comment pinned="false" h="80" w="160">如果先检测到离开，增加离开人次</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="I4fL2!`t7cy;aoO%z{PV"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id=")n`$OI4vTd~00CHX*8cG"><field name="VAR" id="7md()6^1%){?-QuPZ5d#">exitDetected</field></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="(vbs/U:l:]^xfHn|,T/A"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="RW~F}`Yu@e=OaV@Lfo~i"><field name="VAR" id="I+3-xSOZrK(]8N3C7[[+">enterDetected</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_change" id="[B!${Qj@-Xj?fN%eur5M"><field name="VAR" id="s(0{@2vmRq6Pe$0esb[X">exitCount</field><value name="VALUE"><shadow type="math_number" id="Rqwo*AMv8Y.P[*MbFO);"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="e.3r;igWnodgDgy9^9?4"><field name="VAR" id="7md()6^1%){?-QuPZ5d#">exitDetected</field><comment pinned="false" h="80" w="160">重置离开检测状态</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="Nz@Cn$C.THC^HAhfQs,u"><field name="BOOL">FALSE</field></block></value></block></next></block></statement><next><block type="OLED12864_I2C_NUMBER" id="QQS,wD3Pb9$D%QR=UNUI"><field name="oled">Oled.oled1</field><value name="num"><shadow type="math_number"><field name="NUM">12</field></shadow><block type="variables_get" id=";Zj-H~5_dR_%2;MiivJo"><field name="VAR" id="n5K[{:WTfM5H_mu*3-k(">enterCount</field></block></value><next><block type="OLED12864_I2C_NUMBER" id=";|^(4H4YB?Vh(,SqpDh1"><field name="oled">Oled.oled51</field><value name="num"><shadow type="math_number"><field name="NUM">12</field></shadow><block type="variables_get" id=",.e)~04rdV?7kvj@}DN^"><field name="VAR" id="s(0{@2vmRq6Pe$0esb[X">exitCount</field></block></value><next><block type="device_pause" id="4GPJ5Z?h$VXMzHpJ1^4n"><value name="pause"><shadow type="timePicker" id="-9U{dvQj]j^+EIqHz:`%"><field name="ms">2000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="typescript_expression" id="Jr`4Nl4BRcI-NG}qX.1;" disabled="true" editable="false" x="704" y="-20"><field name="EXPRESSION">pins.digitalReadPin(outerSensorPin)</field></block><block type="pxt-on-start" id="|V}k$;yrtlK#4)09fFn+" x="3" y="21"><statement name="HANDLER"><block type="OLED12864_I2C_init" id="cG4|]!|S%Oz-Q/|D#1ci"></block></statement></block><block type="sonar_ping" id="#zl-ZmV3Jf;tLp7%Y$W|" disabled="true" x="786" y="21"><field name="ultpins">Ultrasonic_pin.u1</field><field name="unit">PingUnit.Centimeters</field></block><block type="sonar_ping" id="FofE!;ogeJ$m_+E`:WM#" disabled="true" x="998" y="138"><field name="ultpins">Ultrasonic_pin.u2</field><field name="unit">PingUnit.Centimeters</field></block><block type="typescript_expression" id="c}Bk{bCk%=Vkht+CL2jZ" disabled="true" editable="false" x="992" y="239"><field name="EXPRESSION">pins.digitalReadPin(innerSensorPin)</field></block><block type="typescript_statement" id="wsSv.|!e(V0g):*bp/VL" disabled="true" editable="false" x="-250" y="305"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let outerSensorPin = DigitalPin.P0;" numlines="1" declaredvars="outerSensorPin"></mutation><comment pinned="false" h="80" w="160">外侧超声波传感器连接的引脚</comment><next><block type="typescript_statement" id="K7A$G]QW(k(N4H]3}TEB" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let innerSensorPin = DigitalPin.P1;" numlines="1" declaredvars="innerSensorPin"></mutation><comment pinned="false" h="80" w="160">内侧超声波传感器连接的引脚</comment></block></next></block><block type="device_print_message" id=";qM?Y8iDy~q*.srL3@gi" disabled="true" x="522" y="858"><comment pinned="false" h="80" w="160">显示进入和离开人次</comment><value name="text"><block type="text_join" id="tCqFp~WN4cNK``,A*LEm" disabled="true"><mutation items="4"></mutation><value name="ADD0"><shadow type="text" disabled="true"><field name="TEXT">Enter: </field></shadow><block type="variables_get" id="_[~y~6,y}Qo:k{m*s[UI" disabled="true"><field name="VAR" id="n5K[{:WTfM5H_mu*3-k(">enterCount</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="_!WO?M92Qb5+--t=Th#[" disabled="true"><field name="VAR" id="n5K[{:WTfM5H_mu*3-k(">enterCount</field></block></value><value name="ADD2"><shadow type="text" id="RlXAaE}.{kW!:-pN;4G}" disabled="true"><field name="TEXT"> Exit: </field></shadow></value><value name="ADD3"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="$(Y1(+e6-Sef(MD92shA" disabled="true"><field name="VAR" id="s(0{@2vmRq6Pe$0esb[X">exitCount</field></block></value></block></value><next><block type="device_pause" id="?]@XB,)8%2kM;fkZi[A7" disabled="true"><comment pinned="false" h="80" w="160">每隔一秒更新一次显示</comment><value name="pause"><shadow type="timePicker" id="k(S{WPo|cKJFp)OU.-ow" disabled="true"><field name="ms">1000</field></shadow></value></block></next></block></xml>